// Half-hide member list, showing only avatars
@if ($collapse-member-list) {
    div[class*="membersWrap-"] {
        min-width: 45px;
        width: 45px;
        transition: min-width $collapse-member-list-time-close, width $collapse-member-list-time-close;

        div[class*="membersGroup-"] {
            // Letting the margin stay because it's a nice divisor.
            height: if($status-indicator-border-nomove, 20px, 10px);
            transition: height $collapse-member-list-time-close;

            @if ($status-indicator-border-nomove) {
                transition: height $collapse-member-list-time-close, padding-top $collapse-member-list-time-close;
            }
        }

        div[class*="member-"] {
           margin-left: 0;
           transition: margin-left $collapse-member-list-time-close;
        }

        &:hover {
            min-width: 240px;
            width: 240px;
            transition: min-width $collapse-member-list-time-open, width $collapse-member-list-time-open;
            transition-delay: $collapse-member-list-delay;

            div[class*="membersGroup-"] {
                transition: height $collapse-member-list-time-open;
                transition-delay: $collapse-member-list-delay;
                height: if($status-indicator-border-nomove, 20px, 40px);

                @if ($status-indicator-border-nomove) {
                    transition: height $collapse-member-list-time-open, padding-top $collapse-member-list-time-open;
                    padding-top: 0px;
                }
            }

            div[class*="member-"] {
               margin-left: 8px;
               transition: margin-left $collapse-member-list-time-open;
               transition-delay: $collapse-member-list-delay;
            }
        }
    }
}

// Have the server list appear at the top of the page
@if ($server-list-above) {
    // .guilds-wrapper parent
    div[class*="layer-"]>div:not(.ui-standard-sidebar-view) {
        // All direct children (including .guilds-wrapper)
        flex-direction: column;
    }

    .guilds-wrapper {
        width: 100%;
        height: 75px;
        @if ($server-list-above-below) {
            order: 999;
        }

        .scroller-wrap {
            width: 100%;
        }

        // Sort of a hack, but it's pretty useless and just obscures the view
        .unread-mentions-indicator-top, .unread-mentions-indicator-bottom {
            display: none;
        }

        .guilds {
            padding: 5px 10px;
            display: flex;
            align-items: flex-start;

            .dms, .guild, .guild-separator {
                display: inline-block;
            }

            .friends-online {
                position: absolute;
                top: 50px;
            }

            .dms {
                margin: 0;
                .guild:first-child {
                    margin-left: 10px;
                }
            }

            .guild {
                margin-top: 0!important;
                
                &+.guild {
                    margin-left: 10px;
                }

                &.selected:before, &.unread:before {
                    left: 40%;
                    top: 120%;
                    transform: rotate(90deg);
                }
            }

            .guild-separator {
                width: 2px;
                height: 30px;
                margin-top: 10px;
                margin-left: 7.5px;
                margin-right: 7.5px;
                background-color: #2f3136;
            }
        }
    }
}

// Change status indicator
@mixin status-color($status, $color) {
    div[class*="status#{$status}-"] { border-color: rgba($color, $status-indicator-border-transparancy)!important; }
}
@if ($status-indicator-border) {
    div[class*="avatar-"][class*="small-"] {
        div[class*="mask-"] {
            -webkit-mask: none!important;
            mask: none!important;
        }

        div[class*="status-"] {
            top: -$status-indicator-border-thickness;
            left: -$status-indicator-border-thickness;
            height: 100%;
            width: 100%;
            background-color: transparent;
            border-width: $status-indicator-border-thickness;
        }

        @include status-color('Online', $status-indicator-border-color-online);
        @include status-color('Idle', $status-indicator-border-color-idle);
        @include status-color('Dnd', $status-indicator-border-color-dnd);
        @include status-color('Streaming', $status-indicator-border-color-streaming);
    }

    // Move the member name left if the user has a very high border thickness
    @if ($status-indicator-border-thickness > 5) {
        .memberInner-2CPc3V {
            margin-left: $status-indicator-border-thickness - 5px;
        }
    }
}

// Move channel names closer to # symbol
@if ($channel-hash-margin) {
    div[class*="channels-"] div[class*="scrollerWrap-"] svg[class*="icon-"] {
        margin-right: 0;
    }
}

// Custom fonts
@mixin custom-font-conditional($prop, $val) {
    @if ($val != null) {
        @if ($prop == font-size)    { font-size: $val; }
        @if ($prop == font-family)  { font-family: $val; }
    }
}
@if ($custom-font) {
    code {
        @include custom-font-conditional(font-size, $custom-font-size-code);
        @include custom-font-conditional(font-family, $custom-font-code);
    }

    @if ($custom-font-ui != null) {
        ::-webkit-input-placeholder, body, button, input, select, textarea {
            @include custom-font-conditional(font-family, $custom-font-ui);
        }
    }
}

// Code block images
@mixin language-image($lang, $code) {
    .hljs.#{unquote($lang)} {
        background: url('https://devstickers.com/assets/img/pro/#{unquote($code)}.png') top right no-repeat!important;
        background-size: 28px!important;
     }
}
@if ($code-block-images) {
    @include language-image('cs',  '2p4i');
    @include language-image('cpp', '35k9');
    @include language-image('js',  'i4eg');
    @include language-image('html','ny2e');
    @include language-image('css', '267e');
    @include language-image('php', '1nt5');
    @include language-image('rb',  'uwgt');
    @include language-image('ruby','uwgt');
    @include language-image('py',  'p3jo');
    @include language-image('swift','ji5v');
    @include language-image('go',  'hyc7');
    @include language-image('dart','rvwm');
    @include language-image('hs',  'iz0n');
    @include language-image('ls',  'j4vm');
    @include language-image('rs',  'fzk3');
    // @include language-image('cl',  'k7yf');
}

// Hide download button on web client
@if ($web-hide-download-button) {
    .btn-download-apps {
        display: none!important;
    }
}

// Change the look of the user popup
@if ($alternative-user-popup) {
    // General popout, borders
    div[class*="userPopout-"] {
        box-shadow: none;

        // Make sure shadow on children is visible
        padding: 5px;
        margin: -5px;

        // Give children shadow
        &>div {
            box-shadow: 0 0 10px 0px rgba(#000,.5);
            border-radius: 5px;
        }

        // Space between elements
        div[class*="body-"] {
            margin: 5px 0;
        }
    }

    // Head part
    div[class*="headerTop"] {
        // Have slightly less padding
        padding: 10px;

        // Avatar size
        div[class*="popout-"] {
            width: 128px;
            height: 128px;

            // Make the status indicator not round
            div[class*="avatarStatus-"] {
                border-radius: 0;
            }
        }
        
        // Avatar border radius
        div[class*="popout-"] > div[class*="image-"], div[class*="avatarHint-"] {
            border-radius: 10px!important;
        }

        // Remove mask on avatar
        div[class*="maskProfile-"] {
            -webkit-mask: none;
            mask: none;
        }

        // Box around username
        div[class*="headerText-"] {
            background: #484848;
            padding: 3px 5px;
            border-radius: 5px;
        }
    }

    // Body part
    $role-height: 18px;
    $font-size: 12px;   // $role-height / 2
    li[class*="role-"] {
        // Make border into background
        padding: 0;
        height: $role-height;
        border-width: $role-height/2;
        border-radius: $role-height/2;
        font-size: $font-size;

        // Make the circle snugly fit into the corner
        *[class*="roleCircle-"] {
            border-radius: 50% 0 0 50%;
            height: $role-height;
            width: $role-height*0.85;
            margin-left: -$role-height/2;
            
            // Try to text-align somewhat
            margin-right: 7px;
        }

        // Make the add button look better
        &[class*="addButton-"] {
            //padding: 6px;
            border-width: 0;
        }
    }

    // Footer part
    div[class*="footer-"] {
        padding: 0 10px;
        border-top: none;

        // quickMessage
        input {
            margin: 10px 0;
        }

        div[class*="protip-"] {
            display: none;
        }
    }
}
